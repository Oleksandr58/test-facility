function buildProducts(){$.getJSON("json/products.json",function(e){$.each(e,function(){for(var t=document.querySelector("#js-product"),n=t.content.querySelector(".product__title"),i=t.content.querySelector("img"),o=t.content.querySelector(".product__id"),r=t.content.querySelector(".product__price"),s=t.content.querySelector(".product__add"),a=e.products,l=0;l<a.length;l++){n.textContent=a[l].name,o.textContent=a[l].id,r.textContent=a[l].price+a[l].currency,s.setAttribute("data-id",a[l].id),i.setAttribute("src",a[l].img);var c=document.importNode(t.content,!0);document.querySelector(".products__list").appendChild(c)}initAddBtns(a)})})}function initAddBtns(e){function t(e){return $('.js-add-product[data-id="'+e+'"]').closest(".product").find(".js-size-product.active").text()}function n(){$(document).on("click",".js-product-minus",function(){var e=$(this).closest(".b-product").find(".js-product-amount"),t=+e.text()-1;t?i(e,t):(s=s.filter(function(t){return t.id!=e.data("id")}),changeAmount(s))}),$(document).on("click",".js-product-plus",function(){var e=$(this).closest(".b-product").find(".js-product-amount");i(e,+e.text()+1)})}function i(e,t){e.text(t),$.each(s,function(n,i){i.id==e.data("id")&&(i.amount=t)}),buildBasket(s)}function o(){$(document).on("click",".js-size-product",function(){var e=$(this),t=e.closest(".product").find(".js-add-product"),n="";e.hasClass("active")?e.removeClass("active"):(e.closest(".product").find(".js-size-product.active").removeClass("active"),e.addClass("active"),n=e.text()),$.each(s,function(e,i){i.id==t.data("id")&&(i.size=n)}),buildBasket(s)})}function r(){$(".js-send-order").on("click",function(){s=[],buildBasket(s),alert("Oke")})}var s=[];$(document).on("click",".js-add-product",function(){var n=$(this);if(n.toggleClass("active"),s.filter(function(e){return e.id==n.data("id")}).length)s=s.filter(function(e){return e.id!=n.data("id")});else{var i=e.filter(function(e){return e.id==n.data("id")})[0];i.size=t(n.data("id")),s.push(i)}changeAmount(s)}),n(),o(),r()}function initLikeBtns(){$(document).on("click",".js-like-product",function(){$(this).toggleClass("active")})}function changeAmount(e){var t=$(".js-product-amount");e.length?t.show().text(e.length):t.hide(),buildBasket(e)}function buildBasket(e){var t=document.querySelector("#js-product-basket"),n=t.content.querySelector(".b-product__title"),i=t.content.querySelector(".b-product__img"),o=t.content.querySelector(".js-b-product__size"),r=t.content.querySelector(".b-product__price"),s=t.content.querySelector(".js-product-amount"),a=document.querySelector(".js-basket-products"),l=document.querySelector(".js-total-price"),c=0;a.innerHTML="",l.innerHTML=" ";for(var d=0;d<e.length;d++){var u=e[d].amount?e[d].amount*e[d].price:e[d].price;n.textContent=e[d].name,r.textContent=u+e[d].currency,s.textContent=e[d].amount?e[d].amount:1,s.setAttribute("data-id",e[d].id),i.setAttribute("src",e[d].img),o.textContent=e[d].size?e[d].size:"",c+=+u;var p=document.importNode(t.content,!0);a.appendChild(p)}l.innerHTML=c}function initBasketBtns(){$(".js-open-basket").on("click",function(){$(".js-basket").toggleClass("active")})}function initSlider(e){$(e).slick({infinite:!0,slidesToShow:1,slidesToScroll:1,autoplaySpeed:5e3,speed:500,prevArrow:".js-slider-prev",nextArrow:".js-slider-next",zIndex:0})}$(document).ready(function(){initSlider(".js-slider"),buildProducts(),initLikeBtns(),initBasketBtns()});