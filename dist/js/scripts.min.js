function buildProducts(){$.getJSON("json/products.json",function(t){$.each(t,function(){for(var e=document.querySelector("#js-product"),n=e.content.querySelector(".product__title"),o=e.content.querySelector("img"),c=e.content.querySelector(".product__id"),i=e.content.querySelector(".product__price"),r=e.content.querySelector(".product__add"),u=t.products,d=0;d<u.length;d++){n.textContent=u[d].name,c.textContent=u[d].id,i.textContent=u[d].price+u[d].currency,r.setAttribute("data-id",u[d].id),o.setAttribute("src",u[d].img);var s=document.importNode(e.content,!0);document.querySelector(".products__list").appendChild(s)}initAddBtns(u)})})}function initAddBtns(t){function e(t){return $('.js-add-product[data-id="'+t+'"]').closest(".product").find(".js-size-product.active").text()}function n(){$(document).on("click",".js-product-minus",function(){var t=$(this).closest(".b-product").find(".js-product-amount"),e=+t.text()-1;e?o(t,e):(r=r.filter(function(e){return e.id!=t.data("id")}),changeAmount(r))}),$(document).on("click",".js-product-plus",function(){var t=$(this).closest(".b-product").find(".js-product-amount");o(t,+t.text()+1)})}function o(t,e){t.text(e),$.each(r,function(n,o){o.id==t.data("id")&&(o.amount=e)}),buildBasket(r)}function c(){$(document).on("click",".js-size-product",function(){var t=$(this),e=t.closest(".product").find(".js-add-product"),n="";t.hasClass("active")?t.removeClass("active"):(t.closest(".product").find(".js-size-product.active").removeClass("active"),t.addClass("active"),n=t.text()),$.each(r,function(t,o){o.id==e.data("id")&&(o.size=n)}),buildBasket(r)})}function i(){$(".js-send-order").on("click",function(){r=[],buildBasket(r),alert("Oke")})}var r=[];$(document).on("click",".js-add-product",function(){var n=$(this);if(n.toggleClass("active"),r.filter(function(t){return t.id==n.data("id")}).length)r=r.filter(function(t){return t.id!=n.data("id")});else{var o=t.filter(function(t){return t.id==n.data("id")})[0];o.size=e(n.data("id")),r.push(o)}changeAmount(r)}),n(),c(),i()}function initLikeBtns(){$(document).on("click",".js-like-product",function(){$(this).toggleClass("active")})}function changeAmount(t){var e=$(".js-product-amount");t.length?e.show().text(t.length):e.hide(),buildBasket(t)}function buildBasket(t){var e=document.querySelector("#js-product-basket"),n=e.content.querySelector(".b-product__title"),o=e.content.querySelector(".b-product__img"),c=e.content.querySelector(".js-b-product__size"),i=e.content.querySelector(".b-product__price"),r=e.content.querySelector(".js-product-amount"),u=document.querySelector(".js-basket-products"),d=document.querySelector(".js-total-price"),s=0;u.innerHTML="",d.innerHTML=" ";for(var a=0;a<t.length;a++){var l=t[a].amount?t[a].amount*t[a].price:t[a].price;n.textContent=t[a].name,i.textContent=l+t[a].currency,r.textContent=t[a].amount?t[a].amount:1,r.setAttribute("data-id",t[a].id),o.setAttribute("src",t[a].img),c.textContent=t[a].size?t[a].size:"",s+=+l;var p=document.importNode(e.content,!0);u.appendChild(p)}d.innerHTML=s}function initBasketBtns(){$(".js-open-basket").on("click",function(){$(".js-basket").toggleClass("active")})}function initSlider(t){$(t).slick({infinite:!0,slidesToShow:1,slidesToScroll:1,autoplaySpeed:5e3,speed:500,prevArrow:".js-slider-prev",nextArrow:".js-slider-next",zIndex:0})}$(document).ready(function(){initSlider(".js-slider"),buildProducts(),initLikeBtns(),initBasketBtns()});